# MySQL 5.7 Optimized Configuration for POS Restaurant System
# Modified from original MySQL configuration + Performance optimizations
# Generated by POS Restaurant Application

# CLIENT SECTION
[client]
port=3306
default-character-set=utf8mb4

[mysql]
no-beep
default-character-set=utf8mb4

# SERVER SECTION
[mysqld]

# ==================== NETWORK & CONNECTION SETTINGS ====================
# IMPORTANT: bind-address set to 0.0.0.0 to allow VPN/remote connections
bind-address=0.0.0.0
port=3306

# Increased from 151 to 500 for multiple devices support
max_connections=500

# Increased from 10 to 100 for better performance
thread_cache_size=100

# Increased from 4M to 64M for large packets
max_allowed_packet=64M

# Connection error handling
max_connect_errors=100
back_log=80

# ==================== PATHS ====================
datadir=C:/ProgramData/MySQL/MySQL Server 5.7/Data
secure-file-priv="C:/ProgramData/MySQL/MySQL Server 5.7/Uploads"

# ==================== CHARACTER SET ====================
# Upgraded from utf8 to utf8mb4 for full Unicode support
character-set-server=utf8mb4
collation-server=utf8mb4_general_ci

# ==================== STORAGE ENGINE ====================
default-storage-engine=INNODB

# ==================== SQL MODE ====================
sql-mode="STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION"

# ==================== LOGGING ====================
log-output=FILE
general-log=0
general_log_file="DESKTOP-E846GAR.log"
slow-query-log=1
slow_query_log_file="DESKTOP-E846GAR-slow.log"
long_query_time=10
log-error="DESKTOP-E846GAR.err"

# ==================== BINARY LOGGING (DISABLED FOR PERFORMANCE) ====================
# Disabled to improve write performance
skip-log-bin

# ==================== REPLICATION ====================
server-id=1
sync_master_info=10000
sync_relay_log=10000
sync_relay_log_info=10000
binlog_row_event_max_size=8K

# ==================== INNODB SETTINGS (CRITICAL FOR PERFORMANCE) ====================
# Increased from 8M to 2GB (70% of RAM recommended for dedicated server)
innodb_buffer_pool_size=2G

# Increased from 8 to 4 instances for better concurrency
innodb_buffer_pool_instances=4

# Increased from 48M to 512M for better transaction handling
innodb_log_file_size=512M

# Increased from 1M to 16M
innodb_log_buffer_size=16M

# Changed from 1 to 2 for better performance (trades ACID for speed)
innodb_flush_log_at_trx_commit=2

# Keep table per file (already enabled in original)
innodb_file_per_table=1

# Increased I/O threads from default
innodb_read_io_threads=8
innodb_write_io_threads=8

# I/O capacity settings for SSD performance
innodb_io_capacity=2000
innodb_io_capacity_max=4000

# Set to 0 for automatic (was 17)
innodb_thread_concurrency=0

# Auto-extend settings
innodb_autoextend_increment=64

# Increased from 300 to 4000
innodb_open_files=4000

# Disable stats on metadata for performance
innodb_stats_on_metadata=0

# Checksum algorithm (0 = crc32, was 0 in original)
innodb_checksum_algorithm=crc32

# Old blocks time
innodb_old_blocks_time=1000

# Concurrency tickets
innodb_concurrency_tickets=5000

# ==================== QUERY CACHE (MYSQL 5.7 - ENABLED FOR PERFORMANCE) ====================
# Changed from 0 to 1 to enable query cache
query_cache_type=1

# Increased from 0 to 256M for caching queries
query_cache_size=256M

# Maximum size of individual cached query result
query_cache_limit=2M

# Minimum block size for query cache
query_cache_min_res_unit=4K

# ==================== TABLE CACHE ====================
# Increased from 2000 to 4096
table_open_cache=4096

# Increased from 1400 to 2048
table_definition_cache=2048

# Increased from 4161 to 8192
open_files_limit=8192

# ==================== BUFFER SIZES (OPTIMIZED) ====================
# Increased from 256K to 4M
sort_buffer_size=4M

# Increased from 64K to 2M
read_buffer_size=2M

# Increased from 256K to 4M
read_rnd_buffer_size=4M

# Increased from 256K to 2M
join_buffer_size=2M

# Increased from 398M to 64M (normalized)
tmp_table_size=64M

# Matched with tmp_table_size
max_heap_table_size=64M

# ==================== NETWORK TIMEOUTS ====================
net_read_timeout=60
net_write_timeout=60
wait_timeout=28800
interactive_timeout=28800
connect_timeout=10

# ==================== MYISAM SETTINGS ====================
# Keep original MyISAM settings for compatibility
key_buffer_size=8M
myisam_max_sort_file_size=100G
myisam_sort_buffer_size=781M

# ==================== PERFORMANCE SCHEMA (DISABLED TO SAVE MEMORY) ====================
performance_schema=OFF

# ==================== OTHER SETTINGS ====================
flush_time=0
